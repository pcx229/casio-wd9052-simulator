<style>
.bl {
    background-image: url(clockv3.png);
    background-position: 82px 130px;
    width: 82px;
    height: 130px;
}
.bl.an {
    background-position: -893px 0px;
}
.bl.dash {
    background-position: -812px 0px;
}
.bl.n0 {
    background-position: -2px 0px;
}
.bl.n1 {
    background-position: -83px 0px;
}
.bl.n2 {
    background-position: -164px 0px;
}
.bl.n3 {
    background-position: -245px 0px;
}
.bl.n4 {
    background-position: -326px 0px;
}
.bl.n5 {
    background-position: -407px 0px;
}
.bl.n6 {
    background-position: -488px 0px;
}
.bl.n7 {
    background-position: -569px 0px;
}
.bl.n8 {
    background-position: -650px 0px;
}
.bl.n9 {
    background-position: -731px 0px;
}


.sl {
    background-image: url(clockv3.png);
    background-position: 62px 88px;
    width: 62px;
    height: 88px;
}
.sl.a {
    background-position: -685px -134px;
}
.sl.an {
    background-position: -499px -134px;
}
.sl.dash {
    background-position: -623px -134px;
}
.sl.n0 {
    background-position: -3px -134px;
}
.sl.n1 {
    background-position: -65px -134px;
}
.sl.n2 {
    background-position: -127px -134px;
}
.sl.n3 {
    background-position: -189px -134px;
}
.sl.n4 {
    background-position: -251px -134px;
}
.sl.n5 {
    background-position: -313px -134px;
}
.sl.n6 {
    background-position: -375px -134px;
}
.sl.n7 {
    background-position: -437px -134px;
}
.sl.n8 {
    background-position: -499px -134px;
}
.sl.n9 {
    background-position: -561px -134px;
}
.sl.nA {
    background-position: -747px -134px;
}
.sl.nD {
    background-position: -809px -134px;
}
.sl.nE {
    background-position: -871px -134px;
}
.sl.nF {
    background-position: -933px -134px;
}
.sl.nH {
    background-position: -995px -134px;
}
.sl.nI {
    background-position: -1057px -134px;
}
.sl.nL {
    background-position: -1119px -134px;
}
.sl.nM {
    background-position: -1181px -134px;
}
.sl.nN {
    background-position: -1243px -134px;
}
.sl.nO {
    background-position: -1305px -134px;
}
.sl.nR {
    background-position: -1367px -134px;
}
.sl.nS {
    background-position: -1429px -134px;
}
.sl.nT {
    background-position: -1491px -134px;
}
.sl.nU {
    background-position: -1553px -134px;
}
.sl.nW {
    background-position: -1615px -134px;
}

#progress-circle {
    background-image: url(clockv3.png);
    background-position: 95px 95px;
    width: 95px;
    height: 95px;
}
#progress-circle.a {
    background-position: -489px -237px;
}
#progress-circle.p0 {
    background-position: -4px -237px;
}
#progress-circle.p1 {
    background-position: -101px -237px;
}
#progress-circle.p2 {
    background-position: -198px -237px;
}
#progress-circle.p3 {
    background-position: -295px -237px;
}
#progress-circle.p4 {
    background-position: -392px -237px;
}
#progress-circle.p5 {
    background-position: -489px -237px;
}

#progress-line {
    background-image: url(clockv3.png);
    background-position: 483px 0px;
    width: 483px;
    height: 65px;
}
#progress-line.a {
    background-position: -498px -346px;
}
#progress-line.p0 {
    background-position: -7px -346px;
}
#progress-line.p1 {
    background-position: -7px -411px;
}
#progress-line.p2 {
    background-position: -7px -476px;
}
#progress-line.p3 {
    background-position: -7px -541px;
}
#progress-line.p4 {
    background-position: -7px -606px;
}
#progress-line.p5 {
    background-position: -7px -671px;
}
#progress-line.p6 {
    background-position: -7px -736px;
}
#progress-line.p7 {
    background-position: -7px -801px;
}
#progress-line.p8 {
    background-position: -7px -866px;
}
#progress-line.p9 {
    background-position: -7px -931px;
}
#progress-line.p10 {
    background-position: -498px -346px;
}
#progress-line.p11 {
    background-position: -498px -411px;
}
#progress-line.p12 {
    background-position: -498px -476px;
}
#progress-line.p13 {
    background-position: -498px -541px;
}
#progress-line.p14 {
    background-position: -498px -606px;
}
#progress-line.p15 {
    background-position: -498px -671px;
}
#progress-line.p16 {
    background-position: -498px -736px;
}
#progress-line.p17 {
    background-position: -498px -801px;
}
#progress-line.p18 {
    background-position: -498px -866px;
}
#progress-line.p19 {
    background-position: -498px -931px;
}

#ampm {
    background-image: url(clockv3.png);
    background-position: 31px 80px;
    width: 31px;
    height: 80px;
}
#ampm.a {
    background-position: -116px -1015px;
}
#ampm.am {
    background-position: -145px -1015px;
}
#ampm.pm {
    background-position: -174px -1015px;
}

#bsaperator {
    background-image: url(clockv3.png);
    background-position: 24px 52px;
    width: 24px;
    height: 52px;
}
#bsaperator.a {
    background-position: -22px -1031px;
}

#tsaperator {
    background-image: url(clockv3.png);
    background-position: 21px 36px;
    width: 21px;
    height: 36px;
}
#tsaperator.a {
    background-position: -53px -1038px;
}
#tsaperator.td {
    background-position: -71px -1038px;
}
#tsaperator.l {
    background-position: -89px -1038px;
}

#fquats {
    background-image: url(clockv3.png);
    background-position: 16px 25px;
    width: 16px;
    height: 25px;
}
#fquats.a {
    background-position: -224px -1041px;
}

#squats {
    background-image: url(clockv3.png);
    background-position: 28px 25px;
    width: 28px;
    height: 25px;
}
#squats.a {
    background-position: -252px -1041px;
}
#squats.d {
    background-position: -252px -1041px;
}
#squats.s {
    background-position: -252px -1041px;
    width: 14px;
    height: 25px;
}

#speaker {
    background-image: url(clockv3.png);
    background-position: 54px 34px;
    width: 54px;
    height: 34px;
}
#speaker.a {
    background-position: -330px -1036px;
}

#str {
    background-image: url(clockv3.png);
    background-position: 39px 39px;
    width: 39px;
    height: 39px;
}
#str.a {
    background-position: -289px -1034px;
}

#split {
    background-image: url(clockv3.png);
    background-position: 61px 20px;
    width: 61px;
    height: 20px;
}
#split.a {
    background-position: -398px -1041px;
}

#clock-body {
    background-image: url(clockv3.png);
    background-position: -11px -1119px;
    width: 636px;
    height: 392px;
}
#clock-body.light {
    background-position: -11px -1522px;
}

#button-mode {
    background-image: url(clockv3.png);
    background-position: -698px -1090px;
    width: 157px;
    height: 103px;
}
#button-mode:active {
    background-position: -869px -1090px;
}

#button-adjust {
    background-image: url(clockv3.png);
    background-position: -673px -1248px;
    width: 171px;
    height: 97px;
}
#button-adjust:active {
    background-position: -844px -1248px;
}

#button-split-reset {
    background-image: url(clockv3.png);
    background-position: -1096px -1248px;
    width: 214px;
    height: 104px;
}
#button-split-reset:active {
    background-position: -1319px -1248px;
}

#button-start-stop {
    background-image: url(clockv3.png);
    background-position: -1096px -1090px;
    width: 214px;
    height: 124px;
}
#button-start-stop:active {
    background-position: -1319px -1090px;
}

#button-light {
    background-image: url(clockv3.png);
    background-position: -717px -1395px;
    width: 150px;
    height: 72px;
}
#button-light:active {
    background-position: -878px -1395px;
}

#clock-layout {
    background-image: url(clockv3.png);
    background-position: -366px -1976px;
    width: 1030px;
    height: 480px;
}
</style>

<div id="clock-body" style="position:absolute; left:180px; top:72px;"> </div>
<div id="button-mode" style="position:absolute; left:46px; top:361px;"> </div>
<div id="button-adjust" style="position:absolute; left:21px; top:83px;"> </div>
<div id="button-split-reset" style="position:absolute; left:800px; top:88px;"> </div>
<div id="button-start-stop" style="position:absolute; left:800px; top:359px;"> </div>
<div id="button-light" style="position:absolute; left:224px; top:7px;"> </div>
<div id="ampm" class="a" style="position:absolute; left:247px; top:335px;"> </div>
<div id="speaker" class="a" style="position:absolute; left:207px; top:115px;"> </div>
<div id="str" class="a" style="position:absolute; left:705px; top:303px;"> </div>
<div id="split" class="a" style="position:absolute; left:435px; top:290px;"> </div>
<div id="fquats" class="a" style="position:absolute; left:449px; top:309px;"> </div>
<div id="squats" class="a" style="position:absolute; left:653px; top:310px;"> </div>
<div id="bsaperator" class="a" style="position:absolute; left:456px; top:348px;"> </div>
<div id="tsaperator" class="a" style="position:absolute; left:625px; top:132px;"> </div>
<div id="smallLetterHolder_1" class="sl a" style="position:absolute; left:271px; top:108px;"> </div>
<div id="smallLetterHolder_2" class="sl a" style="position:absolute; left:334px; top:108px;"> </div>
<div id="smallLetterHolder_3" class="sl a" style="position:absolute; left:397px; top:108px;"> </div>
<div id="smallNumberHolder_1" class="sl an" style="position:absolute; left:493px; top:108px;"> </div>
<div id="smallNumberHolder_2" class="sl an" style="position:absolute; left:555px; top:108px;"> </div>
<div id="smallNumberHolder_3" class="sl an" style="position:absolute; left:656px; top:108px;"> </div>
<div id="smallNumberHolder_4" class="sl an" style="position:absolute; left:718px; top:108px;"> </div>
<div id="bigNumberHolder_1" class="bl an" style="position:absolute; left:285px; top:310px;"> </div>
<div id="bigNumberHolder_2" class="bl an" style="position:absolute; left:365px; top:310px;"> </div>
<div id="bigNumberHolder_3" class="bl an" style="position:absolute; left:491px; top:310px;"> </div>
<div id="bigNumberHolder_4" class="bl an" style="position:absolute; left:571px; top:310px;"> </div>
<div id="smallNumberHolder_5" class="sl an" style="position:absolute; left:663px; top:349px;"> </div>
<div id="smallNumberHolder_6" class="sl an" style="position:absolute; left:725px; top:349px;"> </div>
<div id="progress-line" class="a" style="position:absolute; left:303px; top:221px;"> </div>
<div id="progress-circle" class="a" style="position:absolute; left:204px; top:206px;"> </div>

<script src="./jquery.min.js"></script>
<script>


    var MyTime = new function() {
        this.editedTime = null;
        this.editAt = null;
        
        this.init = function() {
        
        };
        this.getCorrectTime = function() {
            var correctTime = new Date();
            if(this.editedTime == null) {
                return correctTime;
            } else {
                return new Date(this.editedTime + (Date.parse(correctTime) - this.editAt));
            }
        };
        this.editTime = function(d) {
            this.editedTime = Date.parse(d);
            this.editAt =  Date.now();
        };
        this.getTimeParameters = function(d) {
            var i = {
                "Milliseconds": d.getMilliseconds(),
                "Seconds": d.getSeconds(),
                "Minutes": d.getMinutes(),
                "Hours": (d.getHours() > 12) ? d.getHours()-12 : d.getHours(),
                "AMPM": (d.getHours()-12 > 0) ? "pm" : "am",
                "DayOfWeek": d.getDay()+1,
                "Day": d.getDate(),
                "Month": d.getMonth()+1,
                "Year": d.getFullYear()
            };
            return i;
        };
    };
    MyTime.init();
    
    var AlarmClock = new function() {
        this.time = null;
        this.active = null;
        this.flashes = null;
        
        this.init = function() {
            this.time = {
                "Hours": 12,
                "Minutes": 0,
                "Day": "-",
                "Month": "-"
            };
            this.active = false;
            this.flashes = false;
        };
        this.setTime = function(day, month, hour, minutes) {
            this.time = {
                "Hours": hour,
                "Minutes": minutes,
                "Day": day,
                "Month": month
            };
        };
        this.getTime = function() {
            return this.time;
        };
        this.getActivityStatus = function() {
            return this.active;
        };
        this.setActivityStatus = function(t) {
            this.active = t;
        };
        this.getFlashingStatus = function() {
            return this.flashes;
        };
        this.setFlashingStatus = function(t) {
            this.flashes = t;
        };
        this.isItTimeToRing = function(d) {
            if(d.getHours() == this.time["Hours"] && 
               d.getMinutes() == this.time["Minutes"] &&
               d.getSeconds() == 0 &&
               (d.getDay() == this.time["Day"] || this.time["Day"] == "-") &&
               (d.getMonth() == this.time["Month"] || this.time["Month"] == "-")) {
                   return true;
            }
            return false;
        };
    };
    AlarmClock.init();
    
    var CountDown = new function() {
        this.time = null;
        
        this.tempTime = null;
        this.tempTimeSetAt = null;
        
        this.init = function() {
            this.time = {
                "Hours": 0,
                "Minutes": 0,
                "Seconds": 0
            };
            this.tempTime = null;
            this.tempTimeSetAt = null;
        };
        this.setTime = function(h, m, s) {
            this.time = {
                "Hours": h,
                "Minutes": m,
                "Seconds": s
            };
        };
        this.getTime = function() {
            return this.time;
        };
        this.getCountDown = function() {
            if(this.tempTimeSetAt == null) {
                return this.tempTime;
            }
            var remainder = this.tempTime - (Date.now() - this.tempTimeSetAt);
            if(remainder <= 0) {
                return -1;
            } else {
                return remainder;
            }
        };
        this.convert = function(milis) {
            var hours = parseInt(milis / 1000 / 60 / 60);
            var minutes = parseInt(milis / 1000 / 60) - hours * 60;
            var seconds = parseInt(milis / 1000) - hours * 60 * 60 - minutes * 60;
            var miliseconds = milis % 1000;
            return {
                   "Hours": hours,
                   "Minutes": minutes,
                   "Seconds": seconds,
                   "Miliseconds": miliseconds
            };
        };
        this.start = function() {
            if(this.tempTime != null) {
                this.tempTimeSetAt = Date.now();
            } else {
                if(this.time["Hours"] == 0 &&
                   this.time["Minutes"] == 0 &&
                   this.time["Seconds"] == 0) {
                    this.tempTime = 24 * 60 * 60 * 1000;
                } else {
                    this.tempTime = (this.time["Hours"] * 60 * 60 + 
                                     this.time["Minutes"] * 60 + 
                                     this.time["Seconds"]) * 1000;
                }
                this.tempTimeSetAt = Date.now();
            }
        };
        this.stop = function() {
            this.tempTime = this.getCountDown();
            this.tempTimeSetAt = null;
        };
        this.clear = function() {
            this.tempTime = null;
            this.tempTimeSetAt = null;
        };
        this.status = function() {
            if(this.tempTime == null) {
                return "not working";
            } else if(this.tempTimeSetAt == null) {
                return "pause";
            } else return "working";
        };
    };
    CountDown.init();
    
    var Stopper = new function() {
        this.timeSet = null;
        this.pauseAt = null;
        this.splitAt = null;
        
        this.init = function() {
            this.timeSet = null;
            this.pauseAt = null;
            this.splitAt = null;
        };
        this.getTime = function() {
            if(this.timeSet == null) {
                return 0;
            } else if(this.splitAt != null) {
                return this.splitAt - this.timeSet;
            } else if(this.pauseAt != null) {
                return this.pauseAt - this.timeSet;
            } else {
                return Date.now() - this.timeSet;
            }
        };
        this.convert = function(milis) {
            var hours = parseInt(milis / 1000 / 60 / 60);
            var minutes = parseInt(milis / 1000 / 60) - hours * 60;
            var seconds = parseInt(milis / 1000) - hours * 60 * 60 - minutes * 60;
            var miliseconds = milis % 1000;
            return {
                   "Hours": hours,
                   "Minutes": minutes,
                   "Seconds": seconds,
                   "Miliseconds": miliseconds
            };
        };
        this.start = function() {
            if(this.timeSet != null) {
                if(this.splitAt != null) { 
                    this.timeSet = Date.now() - (Date.now() - this.timeSet);
                    this.splitAt = null;
                } else if(this.pauseAt != null) {
                    this.timeSet = Date.now() - (this.pauseAt - this.timeSet);
                    this.pauseAt = null;
                }
            } else {
                this.timeSet = Date.now();
            }
        };
        this.pause = function() {
            if(this.timeSet != null) {
                if(this.splitAt != null) {
                    this.pauseAt = this.splitAt;
                } else {
                    this.pauseAt = Date.now();
                }
            }
        };
        this.split = function() {
            if(this.timeSet != null) {
                if(this.pauseAt == null) {
                    this.splitAt = Date.now();
                }
            }
        };
        this.clear = function() {
            this.timeSet = null;
            this.pauseAt = null;
            this.splitAt = null;
        };
        this.status = function() {
            if(this.timeSet == null) {
                return "not working";
            } else if(this.splitAt != null){
                return "split";
            } else if(this.pauseAt != null) {
                return "pause";
            } else return "working";
        };
    };
    Stopper.init();
    
    function turnOffElements() {
        $("#ampm").attr("class", "");
        $("#speaker").attr("class", "");
        $("#str").attr("class", "");
        $("#split").attr("class", "");
        $("#fquats").attr("class", "");
        $("#squats").attr("class", "");
        $("#bsaperator").attr("class", "");
        $("#tsaperator").attr("class", "");
        $("#smallLetterHolder_1").attr("class", "sl");
        $("#smallLetterHolder_2").attr("class", "sl");
        $("#smallLetterHolder_3").attr("class", "sl");
        $("#smallNumberHolder_1").attr("class", "sl");
        $("#smallNumberHolder_2").attr("class", "sl");
        $("#smallNumberHolder_3").attr("class", "sl");
        $("#smallNumberHolder_4").attr("class", "sl");
        $("#bigNumberHolder_1").attr("class", "bl");
        $("#bigNumberHolder_2").attr("class", "bl");
        $("#bigNumberHolder_3").attr("class", "bl");
        $("#bigNumberHolder_4").attr("class", "bl");
        $("#smallNumberHolder_5").attr("class", "sl");
        $("#smallNumberHolder_6").attr("class", "sl");
        $("#progress-line").attr("class", "");
        $("#progress-circle").attr("class", "");
    }
    
    function turnOnElements() {
        $("#ampm").attr("class", "a");
        $("#speaker").attr("class", "a");
        $("#str").attr("class", "a");
        $("#split").attr("class", "a");
        $("#fquats").attr("class", "a");
        $("#squats").attr("class", "a");
        $("#bsaperator").attr("class", "a");
        $("#tsaperator").attr("class", "a");
        $("#smallLetterHolder_1").attr("class", "sl a");
        $("#smallLetterHolder_2").attr("class", "sl a");
        $("#smallLetterHolder_3").attr("class", "sl a");
        $("#smallNumberHolder_1").attr("class", "sl an");
        $("#smallNumberHolder_2").attr("class", "sl an");
        $("#smallNumberHolder_3").attr("class", "sl an");
        $("#smallNumberHolder_4").attr("class", "sl an");
        $("#bigNumberHolder_1").attr("class", "bl an");
        $("#bigNumberHolder_2").attr("class", "bl an");
        $("#bigNumberHolder_3").attr("class", "bl an");
        $("#bigNumberHolder_4").attr("class", "bl an");
        $("#smallNumberHolder_5").attr("class", "sl an");
        $("#smallNumberHolder_6").attr("class", "sl an");
        $("#progress-line").attr("class", "a");
        $("#progress-circle").attr("class", "a");
    }
    var blinkingElements = new function() {
        this.elems = null;
        this.init = function() {
            this.elems = [];
            setInterval(this.repeat, 50);
        };
        this.repeat = function() {
            this.elems = blinkingElements.elems;
            for(var i=0;i<this.elems.length;i++) {
                this.elems[i]["at"] += 50;
                if(this.elems[i]["at"] > this.elems[i]["cycle"]) {
                    this.elems[i]["at"] = 0;
                    if(this.elems[i]["element"].style.display != "block") {
                        this.elems[i]["element"].style.display = "block";
                    } else {
                        this.elems[i]["element"].style.display = "none";
                    }
                }
            }
        };
        this.add = function(e, t) { 
            e = document.getElementById(e);
            for(var i=0;i<this.elems.length;i++) {
                if(this.elems[i]["element"] == e) {
                    return;
                }
            }
            this.elems.push({"element": e, "cycle": t, "at": 0});
        };
        this.remove = function(e) {
            e = document.getElementById(e);
            for(var i=0;i<this.elems.length;i++) {
                if(this.elems[i]["element"] == e) {
                    this.elems.splice(i,1);
                    e.style.display = "block";
                }
            }
        };
        this.clear = function() {
            for(var i=0;i<this.elems.length;i++) {
                this.elems[i]["element"].style.display = "block";
            }
            this.elems = [];
        };
    };
    blinkingElements.init();
    
    var audio_beep_button = new Audio('beep-button.wav');
    function play_beep_button() {
        audio_beep_button.play();
    }
        
    var audio_beep_alarm = new Audio('beep-alarm.wav');
    function start_play_beep_alarm() {
        audio_beep_alarm.play();
        audio_beep_alarm.loop = true;
    }
    function stop_play_beep_alarm() {
        audio_beep_alarm.loop = false;
    }
        
    var light_flash_animation_interval = null;
    function start_flashing_light() {
        light_flash_animation_interval = setInterval(function() {
            $("#clock-body").toggleClass("light");
        }, 700);
    }
    function stop_flashing_light() {
        if(light_flash_animation_interval != null) {
            clearInterval(light_flash_animation_interval);
            $("#clock-body").attr("class", "");
        }
    }
    
    function start_alarm_show() {
        start_play_beep_alarm();
        if(AlarmClock.getFlashingStatus()) {
            start_flashing_light();
        }
    }
    function end_alarm_show() {
        stop_play_beep_alarm();
        stop_flashing_light();
    }
    
    var HomePageMode = new function() {
        this.init = function() {
            
        };
        this.alarmLightsFlashesTaggle = function() {
            if(AlarmClock.getFlashingStatus()) {
                AlarmClock.setFlashingStatus(false);
            } else {
                AlarmClock.setFlashingStatus(true);
            }
        };
        this.switchIn = function() {
            $("#button-mode").unbind( "click" );
            $("#button-mode").click(function() {
                changeMode('AlarmPage');
                play_beep_button();
            });
            $("#button-adjust").unbind( "click" );
            $("#button-adjust").click(function() {
                changeMode('editHomePage');
            });
            $("#button-split-reset").unbind( "click" );
            $("#button-split-reset").click(function() {
                
            });
            $("#button-start-stop").unbind( "click" );
            $("#button-start-stop").click(function() {
                HomePageMode.alarmLightsFlashesTaggle();
                play_beep_button();
            });
        };
        this.repaint = function() {
            var p = MyTime.getTimeParameters(MyTime.getCorrectTime());
            
            if(AlarmClock.getActivityStatus() == true) {
                $("#speaker").attr("class", "a");
            } else {
                 $("#speaker").attr("class", "");
            }
            
            var days = {
                  1 : ['S','O','N'],
                  2 : ['M','O','N'],
                  3 : ['T','U','E'],
                  4 : ['W','E','D'],
                  5 : ['T','H','U'],
                  6 : ['F','R','I'],
                  7 : ['S','A','T']
             };
             $("#smallLetterHolder_1").attr("class", "sl n" + days[p["DayOfWeek"]][0]);
             $("#smallLetterHolder_2").attr("class", "sl n" + days[p["DayOfWeek"]][1]);
             $("#smallLetterHolder_3").attr("class", "sl n" + days[p["DayOfWeek"]][2]);
             
             if(parseInt(p["Day"]/10) != 0) {
                 $("#smallNumberHolder_1").attr("class", "sl n" + parseInt(p["Day"]/10));
             } else {
                 $("#smallNumberHolder_1").attr("class", "sl");
             }
             $("#smallNumberHolder_2").attr("class", "sl n" + parseInt(p["Day"]%10));
             $("#tsaperator").attr("class", "l");
             if(parseInt(p["Month"]/10) != 0) {
                 $("#smallNumberHolder_3").attr("class", "sl n" + parseInt(p["Month"]/10));
             } else {
                 $("#smallNumberHolder_3").attr("class", "sl");
             }
             $("#smallNumberHolder_4").attr("class", "sl n" + parseInt(p["Month"]%10));
             
             $("#progress-line").attr("class", "p" + parseInt(p["Seconds"]%20));
             $("#progress-circle").attr("class", "p" + parseInt(p["Seconds"]/10));
             
             if(p["Hours"] == 0 && p["AMPM"] == "am"){
                 $("#ampm").attr("class", "");
                 $("#bigNumberHolder_1").attr("class", "bl n" + 1);
                 $("#bigNumberHolder_2").attr("class", "bl n" + 2);
             } else {
                 $("#ampm").attr("class", p["AMPM"]);
                 if(parseInt(p["Hours"]/10) != 0) {
                     $("#bigNumberHolder_1").attr("class", "bl n" + parseInt(p["Hours"]/10));
                 } else {
                     $("#bigNumberHolder_1").attr("class", "bl");
                 }
                 $("#bigNumberHolder_2").attr("class", "bl n" + parseInt(p["Hours"]%10));
             }
             $("#bsaperator").attr("class", "a");
             $("#bigNumberHolder_3").attr("class", "bl n" + parseInt(p["Minutes"]/10));
             $("#bigNumberHolder_4").attr("class", "bl n" + parseInt(p["Minutes"]%10));
             
             $("#smallNumberHolder_5").attr("class", "sl n" + parseInt(p["Seconds"]/10));
             $("#smallNumberHolder_6").attr("class", "sl n" + parseInt(p["Seconds"]%10));
             
             if(AlarmClock.getFlashingStatus()) {
                 $("#str").attr("class", "a");
             } else {
                 $("#str").attr("class", "");
             }
        };
        this.switchOut = function() {
            
        };
    };
    HomePageMode.init();
    
    var editHomePageMode = new function() {
        this.editField = 0;
        
        this.init = function() {
            this.editField = 0;
        };
        this.addOne = function () {
            var t = MyTime.getCorrectTime();
            switch(this.editField) {
                case 1:
                    t.setHours(t.getHours() + 1);
                    break;
                case 2:
                    t.setMinutes(t.getMinutes() + 1);
                    break;
                case 3:
                    t.setSeconds(0);
                    break;
                case 4:
                    t.setFullYear(t.getFullYear() + 1);
                    break;
                case 5:
                    t.setDate(t.getDate() + 1);
                    break;
                case 6:
                    t.setMonth(t.getMonth() + 1);
                    break;
            }
            MyTime.editTime(t);
        };
        this.nextEditField = function() {
            
            blinkingElements.remove("smallLetterHolder_1");
            blinkingElements.remove("smallLetterHolder_2");
            blinkingElements.remove("smallLetterHolder_3");
            blinkingElements.remove("smallNumberHolder_1");
            blinkingElements.remove("smallNumberHolder_2");
            blinkingElements.remove("smallNumberHolder_3");
            blinkingElements.remove("smallNumberHolder_4");
            blinkingElements.remove("smallNumberHolder_5");
            blinkingElements.remove("smallNumberHolder_6");
            blinkingElements.remove("bigNumberHolder_1");
            blinkingElements.remove("bigNumberHolder_2");
            blinkingElements.remove("bigNumberHolder_3");
            blinkingElements.remove("bigNumberHolder_4");
            
            this.editField++;
            if(this.editField == 7) {
                this.editField = 1;
            }
            
            switch(this.editField) {
                case 1:
                    blinkingElements.add("bigNumberHolder_1", 400);
                    blinkingElements.add("bigNumberHolder_2", 400);
                    break;
                case 2:
                    blinkingElements.add("bigNumberHolder_3", 400);
                    blinkingElements.add("bigNumberHolder_4", 400);
                    break;
                case 3:
                    blinkingElements.add("smallNumberHolder_5", 400);
                    blinkingElements.add("smallNumberHolder_6", 400);
                    break;
                case 4:
                    blinkingElements.add("smallLetterHolder_1", 400);
                    blinkingElements.add("smallLetterHolder_2", 400);
                    blinkingElements.add("smallLetterHolder_3", 400);
                    break;
                case 5:
                    blinkingElements.add("smallNumberHolder_1", 400);
                    blinkingElements.add("smallNumberHolder_2", 400);
                    break;
                case 6:
                    blinkingElements.add("smallNumberHolder_3", 400);
                    blinkingElements.add("smallNumberHolder_4", 400);
                    break;
            }
        };
        this.switchIn = function() {
            this.editField = 0;
            this.nextEditField();
            
            $("#button-mode").unbind( "click" );
            $("#button-mode").click(function() {
                editHomePageMode.nextEditField();
            });
            $("#button-adjust").unbind( "click" );
            $("#button-adjust").click(function() {
                changeMode("HomePage");
            });
            $("#button-split-reset").unbind( "click" );
            $("#button-split-reset").click(function() {
                
            });
            $("#button-start-stop").unbind( "click" );
            $("#button-start-stop").click(function() {
                editHomePageMode.addOne();
            });
        };
        this.repaint = function() {
             var p = MyTime.getTimeParameters(MyTime.getCorrectTime());
            
             if(AlarmClock.getActivityStatus() == true) {
                 $("#speaker").attr("class", "a");
             } else {
                 $("#speaker").attr("class", "");
             }
            
             $("#smallLetterHolder_3").attr("class", "sl n" + p["Year"] % 10);
             $("#smallLetterHolder_2").attr("class", "sl n" + parseInt(p["Year"] / 10) % 10);
             $("#smallLetterHolder_1").attr("class", "sl n" + parseInt(p["Year"] / 10 / 10) % 10);
             
             if(parseInt(p["Day"]/10) != 0) {
                 $("#smallNumberHolder_1").attr("class", "sl n" + parseInt(p["Day"]/10));
             } else {
                 $("#smallNumberHolder_1").attr("class", "sl");
             }
             $("#smallNumberHolder_2").attr("class", "sl n" + p["Day"]%10);
             $("#tsaperator").attr("class", "l");
             if(parseInt(p["Month"]/10) != 0) {
                 $("#smallNumberHolder_3").attr("class", "sl n" + parseInt(p["Month"]/10));
             } else {
                 $("#smallNumberHolder_3").attr("class", "sl");
             }
             $("#smallNumberHolder_4").attr("class", "sl n" + p["Month"]%10);
             
             if(p["Hours"] == 0 && p["AMPM"] == "am"){
                 $("#ampm").attr("class", "");
                 $("#bigNumberHolder_1").attr("class", "bl n" + 1);
                 $("#bigNumberHolder_2").attr("class", "bl n" + 2);
             } else {
                 $("#ampm").attr("class", p["AMPM"]);
                 if(parseInt(p["Hours"]/10) != 0) {
                     $("#bigNumberHolder_1").attr("class", "bl n" + parseInt(p["Hours"]/10));
                 } else {
                     $("#bigNumberHolder_1").attr("class", "bl");
                 }
                 $("#bigNumberHolder_2").attr("class", "bl n" + parseInt(p["Hours"]%10));
             }
             $("#bsaperator").attr("class", "a");
             $("#bigNumberHolder_3").attr("class", "bl n" + parseInt(p["Minutes"]/10));
             $("#bigNumberHolder_4").attr("class", "bl n" + parseInt(p["Minutes"]%10));
             
             $("#smallNumberHolder_5").attr("class", "sl n" + parseInt(p["Seconds"]/10));
             $("#smallNumberHolder_6").attr("class", "sl n" + parseInt(p["Seconds"]%10));
             
             if(AlarmClock.getFlashingStatus()) {
                 $("#str").attr("class", "a");
             } else {
                 $("#str").attr("class", "");
             }
        }
        this.switchOut = function() {
            
        };
    };
    editHomePageMode.init();
    
    var AlarmPageMode = new function() {
        this.init = function() {
            
        };
        this.switchIn = function() {
            $("#button-mode").unbind( "click" );
            $("#button-mode").click(function() {
                changeMode('CountDownPage');
                play_beep_button();
            });
            $("#button-adjust").unbind( "click" );
            $("#button-adjust").click(function() {
                changeMode('editAlarmPage');
            });
            $("#button-split-reset").unbind( "click" );
            $("#button-split-reset").click(function() {
                
            });
            $("#button-start-stop").unbind( "click" );
            $("#button-start-stop").click(function() {
                AlarmPageMode.setActiveTaggle()
            });
        };
        this.setActiveTaggle = function() {
            if(AlarmClock.getActivityStatus()) {
                AlarmClock.setActivityStatus(false);
            } else {
                AlarmClock.setActivityStatus(true);
            }
        }
        this.repaint = function() {
             var t = AlarmClock.getTime();
            
             if(AlarmClock.getActivityStatus() == true) {
                 $("#speaker").attr("class", "a");
             } else {
                  $("#speaker").attr("class", "");
             }
            
             $("#smallLetterHolder_1").attr("class", "sl nA");
             $("#smallLetterHolder_2").attr("class", "sl nL");
             
             if(t["Day"] == '-') {
                     $("#smallNumberHolder_1").attr("class", "sl dash");
                     $("#smallNumberHolder_2").attr("class", "sl dash");
             } else {
                 if(parseInt(t["Day"]/10) != 0) {
                     $("#smallNumberHolder_1").attr("class", "sl n" + parseInt(t["Day"]/10));
                 } else {
                     $("#smallNumberHolder_1").attr("class", "sl");
                 }
                 $("#smallNumberHolder_2").attr("class", "sl n" + parseInt(t["Day"]%10));
             }
             $("#tsaperator").attr("class", "l");
             if(t["Month"] == '-') {
                     $("#smallNumberHolder_3").attr("class", "sl dash");
                     $("#smallNumberHolder_4").attr("class", "sl dash");
             } else {
                 if(parseInt(t["Month"]/10) != 0) {
                     $("#smallNumberHolder_3").attr("class", "sl n" + parseInt(t["Month"]/10));
                 } else {
                     $("#smallNumberHolder_3").attr("class", "sl");
                 }
                 $("#smallNumberHolder_4").attr("class", "sl n" + parseInt(t["Month"]%10));
             }
             
             var ampm = (t["Hours"] > 12) ? "pm" : "am";
             if(t["Hours"] == 0 && ampm == "am"){
                 $("#ampm").attr("class", "");
                 $("#bigNumberHolder_1").attr("class", "bl n" + 1);
                 $("#bigNumberHolder_2").attr("class", "bl n" + 2);
             } else {
                 $("#ampm").attr("class", ampm);
                 var hours = (t["Hours"] > 12) ? t["Hours"]-12 : t["Hours"];
                 if(parseInt(hours/10) != 0) {
                     $("#bigNumberHolder_1").attr("class", "bl n" + parseInt(hours/10));
                 } else {
                     $("#bigNumberHolder_1").attr("class", "bl");
                 }
                 $("#bigNumberHolder_2").attr("class", "bl n" + parseInt(hours%10));
             }
             
             $("#bsaperator").attr("class", "a");
             $("#bigNumberHolder_3").attr("class", "bl n" + parseInt(t["Minutes"]/10));
             $("#bigNumberHolder_4").attr("class", "bl n" + parseInt(t["Minutes"]%10));
             
             if(AlarmClock.getFlashingStatus()) {
                 $("#str").attr("class", "a");
             } else {
                 $("#str").attr("class", "");
             }
        };
        this.switchOut = function() {
            
        };
    };
    AlarmPageMode.init();
    
    var editAlarmPageMode = new function() {
        this.editField = 0;
        
        this.init = function() {
            this.editField = 0;
        };
        this.addOne = function () {
            var t = AlarmClock.getTime();
            switch(this.editField) {
                case 1:
                    if(t["Hours"]+1 == 24) {
                        AlarmClock.setTime(t["Day"], t["Month"], 0, t["Minutes"]);
                    } else {
                        AlarmClock.setTime(t["Day"], t["Month"], t["Hours"]+1, t["Minutes"]);
                    }
                    break;
                case 2:
                    if(t["Minutes"]+1 == 60) {
                        AlarmClock.setTime(t["Day"], t["Month"], t["Hours"], 0);
                    } else {
                        AlarmClock.setTime(t["Day"], t["Month"], t["Hours"], t["Minutes"]+1);
                    }
                    break;
                case 3:
                    if(t["Day"] == "-") {
                        AlarmClock.setTime(1, t["Month"], t["Hours"], t["Minutes"]);
                    } else if(t["Day"]+1 == 32) {
                        AlarmClock.setTime("-", t["Month"], t["Hours"], t["Minutes"]);
                    } else {
                        AlarmClock.setTime(t["Day"]+1, t["Month"], t["Hours"], t["Minutes"]);
                    }
                    break;
                case 4:
                    if(t["Month"] == "-") {
                        AlarmClock.setTime(t["Day"], 1, t["Hours"], t["Minutes"]);
                    } else if(t["Month"]+1 == 13) {
                        AlarmClock.setTime(t["Day"], "-", t["Hours"], t["Minutes"]);
                    } else {
                        AlarmClock.setTime(t["Day"], t["Month"]+1, t["Hours"], t["Minutes"]);
                    }
                    break;
            }
        };
        this.nextEditField = function() {
            
            blinkingElements.remove("smallNumberHolder_1");
            blinkingElements.remove("smallNumberHolder_2");
            blinkingElements.remove("smallNumberHolder_3");
            blinkingElements.remove("smallNumberHolder_4");
            blinkingElements.remove("bigNumberHolder_1");
            blinkingElements.remove("bigNumberHolder_2");
            blinkingElements.remove("bigNumberHolder_3");
            blinkingElements.remove("bigNumberHolder_4");
            
            this.editField++;
            if(this.editField == 5) {
                this.editField = 1;
            }
            
            switch(this.editField) {
                case 1:
                    blinkingElements.add("bigNumberHolder_1", 400);
                    blinkingElements.add("bigNumberHolder_2", 400);
                    break;
                case 2:
                    blinkingElements.add("bigNumberHolder_3", 400);
                    blinkingElements.add("bigNumberHolder_4", 400);
                    break;
                case 3:
                    blinkingElements.add("smallNumberHolder_1", 400);
                    blinkingElements.add("smallNumberHolder_2", 400);
                    break;
                case 4:
                    blinkingElements.add("smallNumberHolder_3", 400);
                    blinkingElements.add("smallNumberHolder_4", 400);
                    break;
            }
        };
        this.switchIn = function() {
            this.editField = 0;
            this.nextEditField();
            
            $("#button-mode").unbind( "click" );
            $("#button-mode").click(function() {
                editAlarmPageMode.nextEditField();
            });
            $("#button-adjust").unbind( "click" );
            $("#button-adjust").click(function() {
                changeMode('AlarmPage');
            });
            $("#button-split-reset").unbind( "click" );
            $("#button-split-reset").click(function() {
                
            });
            $("#button-start-stop").unbind( "click" );
            $("#button-start-stop").click(function() {
                editAlarmPageMode.addOne();
            });
        };
        this.setActiveTaggle = function() {
            if(AlarmClock.getActivityStatus()) {
                AlarmClock.setActivityStatus(false);
            } else {
                AlarmClock.setActivityStatus(true);
            }
        }
        this.repaint = function() {
             var t = AlarmClock.getTime();
            
             if(AlarmClock.getActivityStatus() == true) {
                 $("#speaker").attr("class", "a");
             } else {
                  $("#speaker").attr("class", "");
             }
            
             $("#smallLetterHolder_1").attr("class", "sl nA");
             $("#smallLetterHolder_2").attr("class", "sl nL");
             
             if(t["Day"] == '-') {
                     $("#smallNumberHolder_1").attr("class", "sl dash");
                     $("#smallNumberHolder_2").attr("class", "sl dash");
             } else {
                 if(parseInt(t["Day"]/10) != 0) {
                     $("#smallNumberHolder_1").attr("class", "sl n" + parseInt(t["Day"]/10));
                 } else {
                     $("#smallNumberHolder_1").attr("class", "sl");
                 }
                 $("#smallNumberHolder_2").attr("class", "sl n" + parseInt(t["Day"]%10));
             }
             $("#tsaperator").attr("class", "l");
             if(t["Month"] == '-') {
                     $("#smallNumberHolder_3").attr("class", "sl dash");
                     $("#smallNumberHolder_4").attr("class", "sl dash");
             } else {
                 if(parseInt(t["Month"]/10) != 0) {
                     $("#smallNumberHolder_3").attr("class", "sl n" + parseInt(t["Month"]/10));
                 } else {
                     $("#smallNumberHolder_3").attr("class", "sl");
                 }
                 $("#smallNumberHolder_4").attr("class", "sl n" + parseInt(t["Month"]%10));
             }
             
             var ampm = (t["Hours"] > 12) ? "pm" : "am";
             if(t["Hours"] == 0 && ampm == "am"){
                 $("#ampm").attr("class", "");
                 $("#bigNumberHolder_1").attr("class", "bl n" + 1);
                 $("#bigNumberHolder_2").attr("class", "bl n" + 2);
             } else {
                 $("#ampm").attr("class", ampm);
                 var hours = (t["Hours"] > 12) ? t["Hours"]-12 : t["Hours"];
                 if(parseInt(hours/10) != 0) {
                     $("#bigNumberHolder_1").attr("class", "bl n" + parseInt(hours/10));
                 } else {
                     $("#bigNumberHolder_1").attr("class", "bl");
                 }
                 $("#bigNumberHolder_2").attr("class", "bl n" + parseInt(hours%10));
             }
             
             $("#bsaperator").attr("class", "a");
             $("#bigNumberHolder_3").attr("class", "bl n" + parseInt(t["Minutes"]/10));
             $("#bigNumberHolder_4").attr("class", "bl n" + parseInt(t["Minutes"]%10));
             
             if(AlarmClock.getFlashingStatus()) {
                 $("#str").attr("class", "a");
             } else {
                 $("#str").attr("class", "");
             }
        };
        this.switchOut = function() {
            
        };
    };
    editAlarmPageMode.init();

    var CountDownPageMode = new function() {
        this.init = function() {
            
        };
        this.stop = function() {
            if(CountDown.status() == "working") {
                this.taggle();
            } else if(CountDown.status() == "pause") {
                this.reset();
            }
        };
        this.taggle = function() {
            if(CountDown.status() == "working") {
                CountDown.stop();
            } else {
                CountDown.start();
            }
        };
        this.reset = function() {
            if(CountDown.status() == "working") {
                CountDown.stop();
            }
            CountDown.clear();
        };
        this.switchIn = function() {
            $("#button-mode").unbind( "click" );
            $("#button-mode").click(function() {
                changeMode('StopperPage');
                play_beep_button();
            });
            $("#button-adjust").unbind( "click" );
            $("#button-adjust").click(function() {
                if(CountDown.status() == "working" || CountDown.status() == "pause") {
                    CountDownPageMode.reset()
                    play_beep_button();
                } else {
                    changeMode('editCountDownPage');
                }
            });
            $("#button-split-reset").unbind( "click" );
            $("#button-split-reset").click(function() {
                
            });
            $("#button-start-stop").unbind( "click" );
            $("#button-start-stop").click(function() {
                CountDownPageMode.taggle();
                play_beep_button();
            });
        };
        this.repaint = function() {
            var t = null;
            if(CountDown.status() == "not working") {
                t = CountDown.getTime();
            } else {
                t = CountDown.convert(CountDown.getCountDown()+1000);
            }
            
            if(t["Hours"] <= 0 && 
               t["Minutes"] <= 0 &&
               t["Seconds"] <= 0 &&
               t["Miliseconds"] <= 0) {
                CountDown.clear();
                return;
            }
            
            var p = MyTime.getTimeParameters(MyTime.getCorrectTime());
            
             if(AlarmClock.getActivityStatus() == true) {
                 $("#speaker").attr("class", "a");
             } else {
                  $("#speaker").attr("class", "");
             }
            
             $("#smallLetterHolder_1").attr("class", "sl nT");
             $("#smallLetterHolder_2").attr("class", "sl nR");
             
             if(p["Hours"] == 0 && p["AMPM"] == "am"){
                 $("#ampm").attr("class", "");
                 $("#smallNumberHolder_1").attr("class", "sl n" + 1);
                 $("#smallNumberHolder_2").attr("class", "sl n" + 2);
             } else {
                 if(parseInt(p["Hours"]/10) != 0) {
                     $("#smallNumberHolder_1").attr("class", "sl n" + parseInt(p["Hours"]/10));
                 } else {
                     $("#smallNumberHolder_1").attr("class", "sl");
                 }
                 $("#smallNumberHolder_2").attr("class", "sl n" + parseInt(p["Hours"]%10));
             }
             if(p["Seconds"] % 2 == 0){
                 $("#tsaperator").attr("class", "td");
             } else {
                 $("#tsaperator").attr("class", "");
             }
             $("#smallNumberHolder_3").attr("class", "sl n" + parseInt(p["Minutes"]/10));
             $("#smallNumberHolder_4").attr("class", "sl n" + parseInt(p["Minutes"]%10));
             
             if(CountDown.status() == "not working") {
                 $("#progress-circle").attr("class", "");
                 $("#progress-line").attr("class", "");
             } else {
                 $("#progress-circle").attr("class", "p" + parseInt(t["Seconds"]/10));
                 $("#progress-line").attr("class", "p" + parseInt(t["Miliseconds"]/50));
             }
             
             if(t["Hours"] < 10) {
                 $("#bigNumberHolder_1").attr("class", "bl");
                 $("#bigNumberHolder_2").attr("class", "bl n" + t["Hours"]%10);
             } else {
                 $("#bigNumberHolder_1").attr("class", "bl n" + parseInt(t["Hours"]/10));
                 $("#bigNumberHolder_2").attr("class", "bl n" + t["Hours"]%10);
             }
             $("#bsaperator").attr("class", "a");
             $("#bigNumberHolder_3").attr("class", "bl n" + parseInt(t["Minutes"]/10));
             $("#bigNumberHolder_4").attr("class", "bl n" + t["Minutes"]%10);
             if(t["Miliseconds"] < 500 || 
                CountDown.status() == "not working"  || 
                CountDown.status() == "pause"){
                 $("#squats").attr("class", "s");
             } else {
                 $("#squats").attr("class", "");
             }
             $("#smallNumberHolder_5").attr("class", "sl n" + parseInt(t["Seconds"]/10));
             $("#smallNumberHolder_6").attr("class", "sl n" + t["Seconds"]%10);
             
             if(AlarmClock.getFlashingStatus()) {
                 $("#str").attr("class", "a");
             } else {
                 $("#str").attr("class", "");
             }
        };
        this.switchOut = function() {
            
        };
    };
    CountDownPageMode.init();

    var editCountDownPageMode = new function() {
        this.editField = 0;
        
        this.init = function() {
            this.editField = 0;
        };
        this.addOne = function () {
            var t = null;
            if(CountDown.status() == "not working") {
                t = CountDown.getTime();
            } else {
                t = CountDown.convert(CountDown.getCountDown());
            }
            switch(this.editField) {
                case 1:
                    if(t["Hours"]+1 == 24) {
                        CountDown.setTime(0, t["Minutes"], t["Seconds"]);
                    } else {
                        CountDown.setTime(t["Hours"]+1, t["Minutes"], t["Seconds"]);
                    }
                    break;
                case 2:
                    if(t["Minutes"]+1 == 60) {
                        CountDown.setTime(t["Hours"], 0, t["Seconds"]);
                    } else {
                        CountDown.setTime(t["Hours"], t["Minutes"]+1, t["Seconds"]);
                    }
                    break;
                case 3:
                    if(t["Seconds"]+1 == 60) {
                        CountDown.setTime(t["Hours"], t["Minutes"], 0);
                    } else {
                        CountDown.setTime(t["Hours"], t["Minutes"], t["Seconds"]+1);
                    }
                    break;
            }
        };
        this.nextEditField = function() {
            
            blinkingElements.remove("squats");
            blinkingElements.remove("bigNumberHolder_1");
            blinkingElements.remove("bigNumberHolder_2");
            blinkingElements.remove("bigNumberHolder_3");
            blinkingElements.remove("bigNumberHolder_4");
            blinkingElements.remove("smallNumberHolder_5");
            blinkingElements.remove("smallNumberHolder_6");
            
            this.editField++;
            if(this.editField == 4) {
                this.editField = 1;
            }
            
            switch(this.editField) {
                case 1:
                    blinkingElements.add("bigNumberHolder_1", 400);
                    blinkingElements.add("bigNumberHolder_2", 400);
                    break;
                case 2:
                    blinkingElements.add("bigNumberHolder_3", 400);
                    blinkingElements.add("bigNumberHolder_4", 400);
                    break;
                case 3:
                    blinkingElements.add("smallNumberHolder_5", 400);
                    blinkingElements.add("smallNumberHolder_6", 400);
                    break;
            }
        };
        this.switchIn = function() {
            this.editField = 0;
            this.nextEditField();
            
            $("#button-mode").unbind( "click" );
            $("#button-mode").click(function() {
                editCountDownPageMode.nextEditField();
            });
            $("#button-adjust").unbind( "click" );
            $("#button-adjust").click(function() {
                changeMode('CountDownPage');
            });
            $("#button-split-reset").unbind( "click" );
            $("#button-split-reset").click(function() {
                
            });
            $("#button-start-stop").unbind( "click" );
            $("#button-start-stop").click(function() {
                editCountDownPageMode.addOne();
            });
        };
        this.repaint = function() {
            var t = null;
            if(CountDown.status() == "not working") {
                t = CountDown.getTime();
            } else {
                t = CountDown.convert(CountDown.getCountDown());
            }
            
            var p = MyTime.getTimeParameters(MyTime.getCorrectTime());
            
             if(AlarmClock.getActivityStatus() == true) {
                 $("#speaker").attr("class", "a");
             } else {
                  $("#speaker").attr("class", "");
             }
            
             $("#smallLetterHolder_1").attr("class", "sl nT");
             $("#smallLetterHolder_2").attr("class", "sl nR");
             
             if(p["Hours"] == 0 && p["AMPM"] == "am"){
                 $("#ampm").attr("class", "");
                 $("#smallNumberHolder_1").attr("class", "sl n" + 1);
                 $("#smallNumberHolder_2").attr("class", "sl n" + 2);
             } else {
                 if(parseInt(p["Hours"]/10) != 0) {
                     $("#smallNumberHolder_1").attr("class", "sl n" + parseInt(p["Hours"]/10));
                 } else {
                     $("#smallNumberHolder_1").attr("class", "sl");
                 }
                 $("#smallNumberHolder_2").attr("class", "sl n" + parseInt(p["Hours"]%10));
             }
             if(p["Seconds"] % 2 == 0){
                 $("#tsaperator").attr("class", "td");
             } else {
                 $("#tsaperator").attr("class", "");
             }
             $("#smallNumberHolder_3").attr("class", "sl n" + parseInt(p["Minutes"]/10));
             $("#smallNumberHolder_4").attr("class", "sl n" + parseInt(p["Minutes"]%10));
             
             if(t["Hours"] < 10) {
                 $("#bigNumberHolder_1").attr("class", "bl");
                 $("#bigNumberHolder_2").attr("class", "bl n" + t["Hours"]%10);
             } else {
                 $("#bigNumberHolder_1").attr("class", "bl n" + parseInt(t["Hours"]/10));
                 $("#bigNumberHolder_2").attr("class", "bl n" + t["Hours"]%10);
             }
             $("#bsaperator").attr("class", "a");
             $("#bigNumberHolder_3").attr("class", "bl n" + parseInt(t["Minutes"]/10));
             $("#bigNumberHolder_4").attr("class", "bl n" + t["Minutes"]%10);
             $("#squats").attr("class", "s");
             $("#smallNumberHolder_5").attr("class", "sl n" + parseInt(t["Seconds"]/10));
             $("#smallNumberHolder_6").attr("class", "sl n" + t["Seconds"]%10);
             
             if(AlarmClock.getFlashingStatus()) {
                 $("#str").attr("class", "a");
             } else {
                 $("#str").attr("class", "");
             }
        };
        this.switchOut = function() {
            
        };
    };
    editCountDownPageMode.init();

    var StopperPageMode = new function() {
        this.init = function() {
            
        };
        this.taggle = function() {
            if(Stopper.status() == "working") {
                Stopper.pause();
            } else if(Stopper.status() == "not working") {
                Stopper.start();
            } else if(Stopper.status() == "pause") {
                Stopper.start();
            } else if(Stopper.status() == "split") {
                Stopper.start();
            }
        };
        this.split = function() {
            if(Stopper.status() == "working") {
                Stopper.split();
            } else if(Stopper.status() == "not working") {
                
            } else if(Stopper.status() == "pause") {
                Stopper.clear();
            } else if(Stopper.status() == "split") {
                Stopper.start();
            }
        };
        this.switchIn = function() {
            $("#button-mode").unbind( "click" );
            $("#button-mode").click(function() {
                changeMode('HomePage');
                play_beep_button();
            });
            $("#button-adjust").unbind( "click" );
            $("#button-adjust").click(function() {
                StopperPageMode.split();
                play_beep_button();
            });
            $("#button-split-reset").unbind( "click" );
            $("#button-split-reset").click(function() {
                StopperPageMode.split();
                play_beep_button();
            });
            $("#button-start-stop").unbind( "click" );
            $("#button-start-stop").click(function() {
                StopperPageMode.taggle();
                play_beep_button();
            });
        };
        this.repaint = function() {
            var t = Stopper.convert(Stopper.getTime());
            
            if(t["Hours"] >= 24) {
                Stopper.clear();
                return;
            }
            
            var p = MyTime.getTimeParameters(MyTime.getCorrectTime());
            
             if(AlarmClock.getActivityStatus() == true) {
                 $("#speaker").attr("class", "a");
             } else {
                  $("#speaker").attr("class", "");
             }
            
             $("#smallLetterHolder_1").attr("class", "sl nS");
             $("#smallLetterHolder_2").attr("class", "sl nT");
             
             if(p["Hours"] == 0 && p["AMPM"] == "am"){
                 $("#ampm").attr("class", "");
                 $("#smallNumberHolder_1").attr("class", "sl n" + 1);
                 $("#smallNumberHolder_2").attr("class", "sl n" + 2);
             } else {
                 if(parseInt(p["Hours"]/10) != 0) {
                     $("#smallNumberHolder_1").attr("class", "sl n" + parseInt(p["Hours"]/10));
                 } else {
                     $("#smallNumberHolder_1").attr("class", "sl");
                 }
                 $("#smallNumberHolder_2").attr("class", "sl n" + parseInt(p["Hours"]%10));
             }
             if(p["Seconds"] % 2 == 0){
                 $("#tsaperator").attr("class", "td");
             } else {
                 $("#tsaperator").attr("class", "");
             }
             $("#smallNumberHolder_3").attr("class", "sl n" + parseInt(p["Minutes"]/10));
             $("#smallNumberHolder_4").attr("class", "sl n" + parseInt(p["Minutes"]%10));
             
             if(Stopper.status() == "not working") {
                 $("#progress-circle").attr("class", "");
                 $("#progress-line").attr("class", "");
             } else {
                 $("#progress-circle").attr("class", "p" + parseInt(t["Seconds"]/10));
                 $("#progress-line").attr("class", "p" + parseInt(t["Miliseconds"]/50));
             }
             
             if(Stopper.status() == "split") {
                 $("#split").attr("class", "a");
             } else {
                 $("#split").attr("class", "");
             }
             
             if(t["Hours"] > 0) {
                 if(t["Hours"] < 10) {
                     $("#bigNumberHolder_1").attr("class", "bl");
                     $("#bigNumberHolder_2").attr("class", "bl n" + t["Hours"]%10);
                 } else {
                     $("#bigNumberHolder_1").attr("class", "bl n" + parseInt(t["Hours"]/10));
                     $("#bigNumberHolder_2").attr("class", "bl n" + t["Hours"]%10);
                 }
                 
                 $("#bsaperator").attr("class", "a");
                 
                 $("#bigNumberHolder_3").attr("class", "bl n" + parseInt(t["Minutes"]/10));
                 $("#bigNumberHolder_4").attr("class", "bl n" + t["Minutes"]%10);
                 
                 $("#smallNumberHolder_5").attr("class", "sl n" + parseInt(t["Seconds"]/10));
                 $("#smallNumberHolder_6").attr("class", "sl n" + t["Seconds"]%10);
             } else {
                 $("#bigNumberHolder_1").attr("class", "bl n" + parseInt(t["Minutes"]/10));
                 $("#bigNumberHolder_2").attr("class", "bl n" + t["Minutes"]%10);

                 $("#bsaperator").attr("class", "");
                 
                 $("#bigNumberHolder_3").attr("class", "bl n" + parseInt(t["Seconds"]/10));
                 $("#bigNumberHolder_4").attr("class", "bl n" + t["Seconds"]%10);

                 $("#smallNumberHolder_5").attr("class", "sl n" + parseInt(t["Miliseconds"]/100));
                 $("#smallNumberHolder_6").attr("class", "sl n" + parseInt(t["Miliseconds"]%100/10));
             }
             
             
             $("#fquats").attr("class", "a");
             if(Stopper.status() == "split" || Stopper.status() == "working") {
                 blinkingElements.add("fquats", 500);
             } else if(Stopper.status() == "pause"){
                 blinkingElements.remove("fquats");
             } else if(Stopper.status() == "not working"){
                 blinkingElements.remove("fquats");
             }
             
             $("#squats").attr("class", "a");
             if(Stopper.status() == "split" || Stopper.status() == "working") {
                 blinkingElements.add("squats", 500);
             } else if(Stopper.status() == "pause"){
                 blinkingElements.remove("squats");
             } else if(Stopper.status() == "not working"){
                 blinkingElements.remove("squats");
             }
             
             if(AlarmClock.getFlashingStatus()) {
                 $("#str").attr("class", "a");
             } else {
                 $("#str").attr("class", "");
             }
        };
        this.switchOut = function() {
            
        };
    };
    StopperPageMode.init();

    var Mode = null;
    
    function init() {
        $("#button-light").click(function() {
            if($("#clock-body").hasClass("light") == false) {
                $("#clock-body").addClass("light");
                setTimeout(function() {
                    $("#clock-body").removeClass("light");
                }, 2000);
            }
        });
        changeMode("HomePage");
        setInterval(repaint, 1);
        setInterval(function() {
            if(AlarmClock.isItTimeToRing(MyTime.getCorrectTime()) &&
               AlarmClock.getActivityStatus() == true){
                AlarmClock.setActivityStatus(false);
                start_alarm_show();
                $("#button-mode").click(function() {
                    end_alarm_show();
                });
                $("#button-adjust").click(function() {
                    end_alarm_show();
                });
                $("#button-split-reset").click(function() {
                    end_alarm_show();
                });
                $("#button-start-stop").click(function() {
                    end_alarm_show();
                });
            }
        }, 1);
    }
    init();
    
    function repaint() {
        Mode.repaint();
    }
    
    function changeMode(m) {
        turnOffElements();
        blinkingElements.clear();
        if(Mode != null) {
            Mode.switchOut();
        }
        switch(m) {
            case 'HomePage':
                Mode = HomePageMode;
                break;
            case 'editHomePage':
                Mode = editHomePageMode;
                break;
            case 'AlarmPage':
                Mode = AlarmPageMode;
                break;
            case "editAlarmPage":
                Mode = editAlarmPageMode;
                break;
            case "CountDownPage":
                Mode = CountDownPageMode;
                break;
            case "editCountDownPage":
                Mode = editCountDownPageMode;
                break;
            case "StopperPage":
                Mode = StopperPageMode;
                break;
        }
        Mode.switchIn();
    }
    
</script>
